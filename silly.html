<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Pooiod7's Scratch Extensions</title>
    <link href="/favicon.ico" rel="icon" type="image/x-icon">

    <meta name="title" content="Pooiod7's Silly Scratch Extension Gallery">
    <meta name="description" content="Explore a large collection of Scratch extensions made by Pooiod7.">
    <meta property="og:title" content="Pooiod7's Silly Scratch Extension Gallery">
    <meta property="og:description" content="Explore a large collection of Scratch extensions made by Pooiod7.">
    <meta property="og:image" content="/extras/images/P7ExtGalleryCover.png">
    <meta name="twitter:title" content="Pooiod7's Silly Scratch Extension Gallery">
    <meta name="twitter:description" content="Explore a large collection of Scratch extensions made by Pooiod7.">
    <meta name="twitter:image" content="/extras/images/P7ExtGalleryCover.png">

    <link rel="preload" href="/extras/images/ErrorPageAxolotl.svg" as="image">
    <link rel="preload" href="/extensions.json" as="fetch" type="application/json">

    <style>
      body {
        font-family: 'Comic Sans MS', cursive, sans-serif;
        margin: 0;
        padding: 0;
        background: linear-gradient(135deg, #ffafbd, #ffc3a0, #ffeb3b);
        background-size: 400% 400%;
        animation: gradientAnimation 15s ease infinite;
        color: #000;
        height: 100vh;
      }
      @keyframes gradientAnimation {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
      }
      header {
        background: radial-gradient(circle, #ff00ff, #ff69b4, #ff1493);
        border-bottom: 4px double #00ff00;
        color: #fff;
        padding: 1rem;
        text-align: center;
        position: relative;
        box-shadow: 0 0 20px 5px rgba(255, 0, 255, 0.6);
      }
      .notice {
        text-align: center;
        margin: 0;
        background-color: #fff8ed;
        border-bottom: 2px dashed #f1e5cf;
        padding: 5px;
      }
      .footer {
        text-align: center;
        margin: 0;
        background: linear-gradient(to right, #edfaff, #cfeaf1);
        border-top: 3px dotted #11353e;
        position: relative;
        padding: 5px;
        font-weight: bold;
        text-shadow: 1px 1px 2px #000;
      }
      .search-bar {
        display: flex;
        justify-content: center;
        margin: 1rem;
      }
      .search-bar input {
        width: 80%;
        max-width: 600px;
        padding: 0.5rem;
        font-size: 1rem;
        border-radius: 10px;
        border: 2px solid #ff00ff;
        background-color: #eee;
        color: #666;
      }
      .cards-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 1rem;
        padding: 1rem;
        max-width: 1200px;
        min-height: calc(100vh - 241px);
        margin: auto;
      }
      .card {
        width: 300px;
        border: 3px solid #00ffff;
        border-radius: 16px;
        background: linear-gradient(145deg, #fff, #ffe);
        overflow: hidden;
        display: flex;
        flex-direction: column;
        position: relative;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }
      .card:hover {
        transform: scale(1.05);
        box-shadow: 0 0 20px 5px rgba(0, 255, 255, 0.8);
      }
      .card.focused, .card:focus {
        outline: 3px solid #ff0000;
        transform: scale(1.05);
      }
      .card img {
        width: 100%;
        aspect-ratio: 6/3;
        border-bottom: 3px solid #00ffff;
      }
      .card-content {
        padding: 1rem;
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        position: relative;
      }
      .card-title {
        font-size: 1.4rem;
        margin: 0 0 0.5rem;
        font-weight: 900;
        text-transform: uppercase;
        color: #ff1493;
        text-shadow: 2px 2px 4px #fff;
      }
      .card-description {
        font-size: 1rem;
        margin: 0 0 0.5rem;
        color: #333;
      }
      .card-subtext {
        font-size: 0.9rem;
        color: #666;
        margin: 0 0 0.6rem;
        font-style: italic;
      }
      .card-buttons {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin-top: auto;
      }
      .card-button {
        flex: 1;
        text-align: center;
        padding: 0.5rem;
        border: 2px solid;
        border-radius: 8px;
        cursor: pointer;
        color: #000;
        font-size: 0.9rem;
        text-decoration: none;
        transition: background 0.3s, transform 0.3s;
      }
      .card-button:hover {
        transform: scale(1.05);
        filter: brightness(1.2);
      }
      .card-icon {
        position: absolute;
        top: 0;
        right: 0;
        padding: 0;
        margin: 8px;
      }
      .card-icon img {
        width: 40px;
        height: 40px;
        opacity: 1;
        border: none;
      }
      .card-icon2 {
        position: absolute;
        top: 0;
        right: 0;
        padding: 5px;
      }
      .card-icon2 img {
        transition: opacity 0.5s ease-in-out;
        width: 18px;
        height: 18px;
        opacity: 0.6;
        border: none;
      }
      .card-icon2 img:hover {
        opacity: 1;
      }
      a {
        color: inherit;
      }
      @media (max-width:700px) {
        .card {
          width: 90%;
          max-width: 400px;
        }
      }
      #loader {
        width: 60px;
        height: 60px;
        border: 6px solid #f3f3f3;
        border-top: 6px solid #3498db;
        border-radius: 50%;
        animation: spin 1s cubic-bezier(0.68, -0.55, 0.265, 1.55) infinite;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }
      @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
      }
      #wobble {
        animation: wobble 2s ease-in-out infinite;
      }
      @keyframes wobble {
        0% { transform: rotate(-5deg); }
        50% { transform: rotate(5deg); }
        100% { transform: rotate(-5deg); }
      }
      @media (prefers-color-scheme: dark) {
        body {
          background: linear-gradient(135deg, #2c3e50, #4ca1af, #1abc9c);
          animation: gradientAnimation 15s ease infinite;
          color: #e0e0e0;
        }
        header {
          background: radial-gradient(circle, #8a2be2, #4b0082, #000080);
          border-bottom: 4px double #00ff00;
          color: #fff;
        }
        .search-bar input {
          filter: invert(1);
        }
        .card {
          background: linear-gradient(145deg, #f0f0f0, #999);
          border: 3px solid #00ffff;
        }
        .card-title {
          color: #ff69b4;
          text-shadow: 2px 2px 4px #000;
        }
        .footer {
          background: linear-gradient(to right, #06191f, #11353e);
          border-top: 3px dotted #11353e;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <h1>I think these are Scratch Extensions made by Pooiod7</h1>
    </header>
    <noscript>
      <div class="notice">Please enable JavaScript to use this site</div>
    </noscript>
    <script>
      function docoolthing() {
        document.querySelectorAll('img[src$=".svg"]').forEach(async img => {
          if (img.src.startsWith('data:')) return;
          const svgText = await crossSpectrumSvg(img.src);
          img.src = 'data:image/svg+xml;base64,' + btoa(svgText);
        });
      }

      async function crossSpectrumSvg(svgUrl) {
        const res = await fetch(svgUrl);
        const text = await res.text();
        const doc = new DOMParser().parseFromString(text, 'image/svg+xml');
        const defs = doc.querySelectorAll('linearGradient, radialGradient, pattern');
        const gradientIds = new Set();
        defs.forEach(d => {
          if (d.id) gradientIds.add(`url(#${d.id})`);
        });
        const elems = Array.from(doc.querySelectorAll('[fill],[stroke]'));
        const shift = Math.floor(Math.random() * 360);
        elems.forEach(el => {
          ['fill', 'stroke'].forEach(attr => {
            const val = el.getAttribute(attr);
            if (val && val !== 'none' && !gradientIds.has(val)) {
              const c = parseColor(val);
              if (c && c.a === 1) {
                const cr = crossColorSpectrum(c, shift);
                el.setAttribute(attr, `rgba(${cr.r},${cr.g},${cr.b},${cr.a})`);
              }
            }
          });
        });
        return new XMLSerializer().serializeToString(doc.documentElement);
      }

      function parseColor(c) {
        const ctx = document.createElement('canvas').getContext('2d');
        ctx.fillStyle = c;
        const computed = ctx.fillStyle;
        if (!computed) return null;
        ctx.fillRect(0, 0, 1, 1);
        const d = ctx.getImageData(0, 0, 1, 1).data;
        return { r: d[0], g: d[1], b: d[2], a: d[3] / 255 };
      }

      function crossColorSpectrum({ r, g, b, a }, shift) {
        const hsl = rgbToHsl(r, g, b);
        hsl.h = (hsl.h + shift) % 360;
        const rgb = hslToRgb(hsl.h, hsl.s, hsl.l);
        return { r: rgb.r, g: rgb.g, b: rgb.b, a };
      }

      function rgbToHsl(r, g, b) {
        r /= 255; g /= 255; b /= 255;
        const max = Math.max(r, g, b), min = Math.min(r, g, b);
        let h = 0, s = 0, l = (max + min) / 2;
        if (max !== min) {
          const d = max - min;
          s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
          switch (max) {
            case r: h = (g - b) / d + (g < b ? 6 : 0); break;
            case g: h = (b - r) / d + 2; break;
            case b: h = (r - g) / d + 4; break;
          }
          h *= 60;
        }
        return { h, s, l };
      }

      function hslToRgb(h, s, l) {
        h /= 360;
        let r, g, b;
        if (s === 0) {
          r = g = b = l * 255;
          return { r, g, b };
        }
        const hue2rgb = (p, q, t) => {
          if (t < 0) t += 1;
          if (t > 1) t -= 1;
          if (t < 1 / 6) return p + (q - p) * 6 * t;
          if (t < 1 / 2) return q;
          if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;
          return p;
        }
        const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
        const p = 2 * l - q;
        r = hue2rgb(p, q, h + 1 / 3) * 255;
        g = hue2rgb(p, q, h) * 255;
        b = hue2rgb(p, q, h - 1 / 3) * 255;
        return { r: Math.round(r), g: Math.round(g), b: Math.round(b) };
      }

      function showNotification(message, color, time) {
        let existingNotification = Array.from(document.querySelectorAll('.stacked-notification'))
          .find(notif => notif.textContent === message);

        function darkenHexColor(hex, percent) {
          let r = parseInt(hex.slice(1, 3), 16);
          let g = parseInt(hex.slice(3, 5), 16);
          let b = parseInt(hex.slice(5, 7), 16);
          r = Math.max(0, r - r * percent / 100);
          g = Math.max(0, g - g * percent / 100);
          b = Math.max(0, b - b * percent / 100);
          return `#${Math.round(r).toString(16).padStart(2, '0')}${Math.round(g).toString(16).padStart(2, '0')}${Math.round(b).toString(16).padStart(2, '0')}`;
        }

        let notification = document.createElement('div');
        notification.textContent = message;
        notification.style.position = 'fixed';
        notification.style.left = '50%';
        notification.style.transform = 'translateX(-50%)';
        notification.style.backgroundColor = color;
        notification.style.color = '#000';
        notification.style.padding = '10px 20px';
        notification.style.border = '2px solid ' + darkenHexColor(color, 20);
        notification.style.borderRadius = '8px';
        notification.style.zIndex = '9999999999999999';
        notification.style.opacity = '0';
        notification.style.transition = 'opacity 0.5s ease-in-out, bottom 0.5s ease-in-out, border 0.5s ease-in-out';
        notification.style.fontSize = '18px';

        let offset = document.querySelectorAll('.stacked-notification').length * 60;
        notification.classList.add('stacked-notification');
        document.body.appendChild(notification);

        if (existingNotification) {
          let borderWidth = parseFloat(existingNotification.style.borderWidth.replace("px", "")) + 0.5;
          if (borderWidth > 10) {
            borderWidth = 10;
          }
          notification.style.borderWidth = borderWidth + "px";
          existingNotification.style.borderWidth = "0px";
          document.querySelectorAll('.stacked-notification').forEach((notif, index) => {
            notif.style.bottom = `${10 + index * 60}px`;
          });
          offset = Math.max(0, (document.querySelectorAll('.stacked-notification').length - 1) * 60);
          existingNotification.remove();
          notification.style.opacity = '1';
          notification.style.bottom = `${10 + Math.max(0, (document.querySelectorAll('.stacked-notification').length - 1) * 60)}px`;
        } else {
          notification.style.bottom = `${10 + offset}px`;
          setTimeout(() => {
            notification.style.opacity = '1';
          }, 10);
        }

        setTimeout(() => {
          notification.style.opacity = '0';
          notification.style.borderWidth = "2px";
          setTimeout(() => {
            if (notification && notification.style.borderWidth != "0px") {
              notification.remove();
              document.querySelectorAll('.stacked-notification').forEach((notif, index) => {
                notif.style.bottom = `${10 + index * 60}px`;
              });
            }
          }, 500);
        }, time || 2000);
      }

      function showWarning(message) {
        const existingNotice = document.querySelector('.notice');
        if (existingNotice) {
          existingNotice.remove();
        }
        const noticeDiv = document.createElement('div');
        noticeDiv.classList.add('notice');
        noticeDiv.innerHTML = message;
        const header = document.querySelector('header');
        if (header) {
          header.insertAdjacentElement('afterend', noticeDiv);
        } else {
          document.body.appendChild(noticeDiv);
        }
      }

      window.addEventListener('error', function(event) {
        if (event.message == "Script error.") return;
        showNotification("generic error message lol", "#ffd6d6", 3000);
      });
    </script>
    <div class="search-bar">
      <input id="search" placeholder="Search for something EPIC">
    </div>
    <p hidden>
      Sorry, the page you are looking for could not be loaded due to an internal server error.
    </p>
    <div class="cards-container" id="cards-container"></div>
    <p id="loader"></p>
    <footer class="footer">
      Don't like the silly? Get SERIOUS <a href="/serious">here</a>!
    </footer>
    <script>
      let cardsData = ["/extensions.json"];
      let footerHTML = document.querySelector(".footer").innerHTML;

      showWarning("AAAAAAAAAAAAAAAAAAAAAHHHHHHHHHHHHHHHHH");

      if ((window.location.pathname !== "/" && window.location.pathname !== "/silly") && window.location.hostname.includes('p7scratchextensions.pages.dev')) {
        document.body.innerHTML = '';
        document.title += " - page not found";
        const container = document.createElement('div');
        container.style.display = 'flex';
        container.style.flexDirection = 'column';
        container.style.alignItems = 'center';
        container.style.justifyContent = 'center';
        container.style.height = '100vh';
        container.style.color = '#333';
        container.style.fontFamily = 'Comic Sans MS, cursive, sans-serif';
        container.style.textAlign = 'center';
        container.style.padding = '20px';
        container.style.boxSizing = 'border-box';
        const message = document.createElement('h1');
        message.innerHTML = '<img style="height: 40vh; width: auto;" src="/extras/images/ErrorPageAxolotl.svg">';
        message.style.margin = '0';
        const subMessage = document.createElement('p');
        subMessage.innerHTML = `Somebody stole this page! <br>
Go <a href="/" style="color:#555;">home</a>`;
        subMessage.style.fontSize = '1.5rem';
        subMessage.style.marginTop = '20px';
        subMessage.style.color = '#777';
        container.appendChild(message);
        container.appendChild(subMessage);
        document.body.appendChild(container);
        document.body.style.margin = '0';
        document.body.style.fontFamily = 'Comic Sans MS, cursive, sans-serif';
      } else {
        function createCard(card, showhidden) {
          const cardDiv = document.createElement('div');
          cardDiv.className = 'card';
          cardDiv.id = card.id;
          var imageURL = card.image.replace(/\[id\]/g, card.id);
          if (!imageURL || imageURL === "") {
            imageURL = "https://dummyimage.com/600x300/e0e0e0/000&text=" + card.id;
          }
          function lightenHexColor(hex, percent) {
            let r = parseInt(hex.slice(1, 3), 16);
            let g = parseInt(hex.slice(3, 5), 16);
            let b = parseInt(hex.slice(5, 7), 16);
            r = Math.min(255, r + (255 - r) * percent / 100);
            g = Math.min(255, g + (255 - g) * percent / 100);
            b = Math.min(255, b + (255 - b) * percent / 100);
            return `#${Math.round(r).toString(16).padStart(2, '0')}${Math.round(g).toString(16).padStart(2, '0')}${Math.round(b).toString(16).padStart(2, '0')}`;
          }
          function darkenHexColor(hex, percent) {
            let r = parseInt(hex.slice(1, 3), 16);
            let g = parseInt(hex.slice(3, 5), 16);
            let b = parseInt(hex.slice(5, 7), 16);
            r = Math.max(0, r - r * percent / 100);
            g = Math.max(0, g - g * percent / 100);
            b = Math.max(0, b - b * percent / 100);
            return `#${Math.round(r).toString(16).padStart(2, '0')}${Math.round(g).toString(16).padStart(2, '0')}${Math.round(b).toString(16).padStart(2, '0')}`;
          }
          const buttonsHTML = card.buttons.map(button => `
            <a href="${button.link.replace(/\[id\]/g, card.id)}" 
              class="card-button" 
              style="background-color: ${window.matchMedia('(prefers-color-scheme: dark)').matches ? darkenHexColor(button.color, 80) : lightenHexColor(button.color, 90)}; border-color: ${button.color};">
              ${button.text.replace(/ /g, '&nbsp;')}
            </a>
          `).join('');
          const iconHTML = card.icon ? `
            <div class="card-icon" title="${card.iconText || ''}">
              <img src="${card.icon}" alt="Icon" id="${(card.icon && (card.icon.includes("new.svg") || card.icon.includes("update.svg") || card.icon.includes("release.svg"))) ? "wobble" : ""}">
            </div>
          ` : '';
          const sandboxStatusIconHTML = card.unsandboxed !== undefined ? `
            <div class="card-icon2" title="${card.unsandboxed ? "This extension does not work in the sandbox" : "This extension works in the sandbox"}">
              <img src="/extras/images/icons/${card.unsandboxed ? "unsandboxed" : "sandboxed"}.png" alt="${card.unsandboxed ? "Unsandboxed" : "Sandboxed"}">
            </div>
          ` : '';
          cardDiv.innerHTML = `
            ${iconHTML}
            <img src="${imageURL}" alt="${card.title}">
            <div class="card-content">
              ${sandboxStatusIconHTML}
              <div class="card-title">${card.title}</div>
              <div class="card-description">${card.description}</div>
              <div class="card-subtext">${card.subtext || ''}</div>
              <div class="card-buttons">${buttonsHTML}</div>
            </div>
          `;
          cardDiv.style.display = (card.hidden && !showhidden) ? "none" : "";
          return cardDiv;
        }

        async function fetchExtensions() {
          try {
            const response = await fetch(cardsData[0]);
            if (!response.ok) {
              throw new Error('Network response was not ok');
            }
            cardsData = await response.json();
            document.getElementById("loader").remove();
            document.querySelector(".footer").innerHTML = footerHTML;
            renderCards();
          } catch (error) {
            document.getElementById("loader").remove();
            console.error('Failed to fetch extensions:', error);
            document.querySelector('p[hidden]').innerText = "Error loading extensions";
            document.querySelector('p[hidden]').removeAttribute('hidden');
          }
        }

        function renderCards() {
          const container = document.getElementById('cards-container');
          container.innerHTML = '';
          // Render real extensions
          cardsData.forEach(card => {
            container.appendChild(createCard(card));
          });
          // Append a few extra silly joke extensions with extra wild styling!
          const jokes = [
            {
              id: '38792442',
              image: 'https://n-o-v-a.com/wp-content/uploads/2016/08/Malware.jpg',
              title: 'Not a virus',
              description: 'It made my laptop blow up',
              subtext: '',
              buttons: [
                { text: 'Savor it', link: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ', color: '#ff69b4' }
              ]
            }
          ];
          jokes.forEach(card => {
            container.appendChild(createCard(card, true));
          });
          scrollToHash();
        }

        docoolthing();

        function filterCards() {}

        function scrollToHash() {
          const hash = window.location.hash.substring(1);
          if (hash) {
            const targetCard = document.getElementById(hash);
            if (targetCard) {
              targetCard.style.display = "";
              targetCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
              targetCard.classList.add('focused');
              setTimeout(() => targetCard.classList.remove('focused'), 3000);
            }
          }
        }

        window.addEventListener('hashchange', scrollToHash);

        if (new URL(window.location).searchParams.get("q")) {
          document.getElementById('search').value = new URL(window.location).searchParams.get("q");
        }

        document.getElementById('search').onclick = function() {
          showNotification("searching is for loosers", "#ffd6d6", 3000);
          document.getElementById('search').blur();
        };

        fetchExtensions();
      }
    </script>
  </body>
</html>
